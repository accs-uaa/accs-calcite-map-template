<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <meta name="description" content="Enter unformatted title">
  <link rel="icon" href="http://accs.uaa.alaska.edu/favicon.ico">
  <title>Enter unformatted title</title>
  <!-- Reference the calcite maps bootstrap minified css -->
  <link rel="stylesheet" href="/mapping/dist/css/calcite-maps-bootstrap.min-v0.5.css">
  <!-- Reference the calcite maps minified css -->
  <link rel="stylesheet" href="/mapping/dist/css/calcite-maps-arcgis-4.x.min-v0.5.css">
  <!-- Reference the ArcGIS javascript API 4.5 -->
  <link rel="stylesheet" href="https://js.arcgis.com/4.5/esri/css/main.css">
  <!-- Add custom css stylesheet -->
  <link rel="stylesheet" href="/mapping/custom.css">
</head>
<body class="calcite-maps calcite-nav-top">
	<!-- Set up the style for the navbar -->
	<nav class="navbar calcite-navbar navbar-fixed-top calcite-text-dark calcite-bg-light">
		<!-- Set up the style for the menu -->
		<div class="dropdown calcite-dropdown calcite-bg-light calcite-text-dark" role="presentation">
			<a class="dropdown-toggle" role="button" aria-haspopup="true" aria-expanded="false" tabindex="0">
			<div class="calcite-dropdown-toggle">
				<span class="sr-only">Toggle dropdown menu</span>
				<span></span>
				<span></span>
				<span></span>
				<span></span>
				</div>
			</a>
			<ul class="dropdown-menu calcite-menu-drawer" tabindex="0" role="menu">
				<li><a role="menuitem" tabindex="0" href="#" data-target="#panelInfo" aria-haspopup="true"><span class="glyphicon glyphicon-info-sign"></span> Info</a></li>
				<li><a role="menuitem" tabindex="0" href="#" data-target="#panelBasemaps" aria-haspopup="true"><span class="glyphicon glyphicon-th-large"></span> Basemaps</a></li>
				<li><a role="menuitem" tabindex="0" href="#" data-target="#panelLegend" aria-haspopup="true"><span class="glyphicon glyphicon-list-alt"></span> Legend</a></li>
				<li><a role="menuitem" tabindex="0" href="#" data-target="#panelLayers" aria-haspopup="true"><span class="glyphicon glyphicon-list"></span> Layers</a></li>
				<li><a role="menuitem" tabindex="0" href="#" data-target="#panelPrint" aria-haspopup="true"><span class="glyphicon glyphicon-print"></span> Print</a></li>
				<li><a role="menuitem" tabindex="0" href="#" id="calciteToggleNavbar" aria-haspopup="true"><span class="glyphicon glyphicon-fullscreen"></span> Full Map</a></li>
			</ul>
		</div>
		<!-- Set the title -->
		<div class="calcite-title calcite-overflow-hidden">
			<span class="banner"><a href="http://accs.uaa.alaska.edu" title="Navigate to ACCS home page"><img src="http://accs.uaa.alaska.edu/files/photos/logo_accs.gif" height=50px style="overflow:hidden;" /></a></span>
			<span class="calcite-title-divider"></span>
			<span class="calcite-title-main title-size">Enter formatted title</span> 
		</div>
		<!-- Set a back button into the nav bar -->
		<ul class="calcite-nav nav navbar-nav">                    
			<li><a id="back-button" href="http://accs.uaa.alaska.edu/link-back/" role="tab" title="Back to Location" data-placement="bottom">Back</a></li>
		</ul>
	</nav>
	<!-- End of nav bar set up -->
	<!-- Set up splash screen -->
	<div class="modal fade show in" id="modalSplash" tabindex="-1" role="dialog" aria-labelledby="splashlModal">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-body">
					<div class="container-fluid">
						<div class="row">
							<div class="splash-body">
								<div class="text-center">
									<h3>Enter formatted title</h3>
									<hr>
									<div style="text-align:left;">
										<p>Paragraph description.</p>
									</div>
									<p><b>Data sources(s):</b></p>
									<div style="text-align:left;">
										<p>Citation for data source</a></p>
									</div>
									<br>
									<div class="form-inline">
										<div class="form-group">
											<button id="modalButton" type="button" class="btn btn-success btn-lg"  data-dismiss="modal">View Map</a>
										</div>
									</div>
									<br>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript"> 
    // Remove the modal window on click
    window.onload = function() {
		document.getElementById('modalButton').onclick = function () {
			document.getElementById('modalSplash').classList.remove('show','in')
		};
	};
	</script>
	<!-- Set up map container  -->
	<div class="calcite-map calcite-map-absolute">
		<div id="mapViewDiv"></div>
	</div>
	<!-- End of map set up -->
	<!-- Set up panel containers -->
	<div class="calcite-panels calcite-panels-right calcite-text-dark calcite-bg-light panel-group">
		<!-- Set up info panel -->
		<div id="panelInfo" class="panel collapse">
			<div id="headingInfo" class="panel-heading" role="tab">
				<div class="panel-title">
					<a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseInfo"  aria-expanded="false" aria-controls="collapseInfo"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span><span class="panel-label">Info</span></a> 
					<a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelInfo"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>  
				</div>
			</div>
			<div id="collapseInfo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingInfo">
				<div class="panel-body">
					<p>Paragraph description.</p>
				</div>
			</div>
		</div>
		<!-- End info panel -->
		<!-- Set up basemaps panel -->
		<div id="panelBasemaps" class="panel collapse">
			<div id="headingBasemaps" class="panel-heading" role="tab">
				<div class="panel-title">
					<a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapseBasemaps" aria-expanded="false" aria-controls="collapseBasemaps"><span class="glyphicon glyphicon-th-large" aria-hidden="true"></span><span class="panel-label">Basemaps</span></a>
					<a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelBasemaps"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>
				</div>
			</div>
			<div id="collapseBasemaps" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingBasemaps">
				<div class="panel-body">
					<div id="basemapGalleryDiv">
					</div>
				</div>
			</div>
		</div>
		<!-- End basemaps panel -->
		<!-- Set up legend panel -->
		<div id="panelLegend" class="panel collapse">
			<div id="headingLegend" class="panel-heading" role="tab">
				<div class="panel-title">
					<a class="panel-toggle" role="button" data-toggle="collapse" href="#collapseLegend" aria-expanded="false" aria-controls="collapseLegend"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span><span class="panel-label">Legend</span></a> 
					<a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelLegend"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a> 
				</div>
			</div>
			<div id="collapseLegend" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingLegend">
				<div class="panel-body">            
					<div id="legendDiv">
					</div>
				</div>
			</div>
		</div>
		<!-- End legend panel -->
		<!-- Set up layers panel -->
		<div id="panelLayers" class="panel collapse in">
			<div id="headingLayers" class="panel-heading" role="tab">
				<div class="panel-title">
					<a class="panel-toggle" role="button" data-toggle="collapse" href="#collapseLayers" aria-expanded="false" aria-controls="collapseLayers"><span class="glyphicon glyphicon-list" aria-hidden="true"></span><span class="panel-label">Layers</span></a> 
					<a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelLayers"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a> 
				</div>
			</div>
			<div id="collapseLayers" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingLayers">
				<div class="panel-body">            
					<div id="layersDiv">
					</div>
				</div>
			</div>
		</div>
		<!-- End layers panel -->
		<!-- Set up print panel -->
		<div id="panelPrint" class="panel collapse">
			<div id="headingPrint" class="panel-heading">
				<div class="panel-title">
					<a class="panel-toggle collapsed" role="button" data-toggle="collapse" href="#collapsePrint" aria-expanded="false" aria-controls="collapsePrint"><span class="glyphicon glyphicon-print" aria-hidden="true"></span><span class="panel-label">Print</span></a> 
					<a class="panel-close" role="button" data-toggle="collapse" tabindex="0" href="#panelPrint"><span class="esri-icon esri-icon-close" aria-hidden="true"></span></a>
				</div>
			</div>
			<div id="collapsePrint" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingPrint">
				<div class="panel-body">
					<div id="printDiv"></div>
				</div>
			</div>
		</div>
		<!-- End print panel -->
	</div>
	<!-- End of panel container set up -->
	<script type="text/javascript">
		var dojoConfig = {
			packages: [{
				name: "bootstrap",
				location: location.pathname.replace(/\/[^/]+$/, "") + "./../../dist/vendor/dojo-bootstrap"
			},
			{
				name: "calcite-maps",
				location: location.pathname.replace(/\/[^/]+$/, "") + "./../../dist/js/dojo"
			}]
		};
	</script>
	<!-- ArcGIS JS 4.5 -->
	<script src="https://js.arcgis.com/4.5/"></script>
	<script>
	/******************************************************************
	*
	* Define a webmap from JSON
	* 
	******************************************************************/
	// To get a json definition:
		// 1. Make a map using ArcGIS online and share publicly
		// 2. Go to ArcGIS online rest url for the webmap: https://accsmaps.maps.arcgis.com/sharing/rest/content/items/<webmap id>/data?f=pjson
		// 3. Paste json below

	var webmapJSON = {"operationalLayers":[{"id":"AlosaSapidissima_MIROC_2029_2039_355","layerType":"ArcGISFeatureLayer","url":"https://services7.arcgis.com/DlE4MSUhoXlyq64t/arcgis/rest/services/AlosaSapidissima_MIROC_2029_2039/FeatureServer/0","visibility":false,"opacity":1,"title":"Alosa sapidissima (MIROC3.2) 2030-2039","popupInfo":{"title":"Alosa sapidissima (MIROC3.2) 2030 to 2039","fieldInfos":[{"fieldName":"OBJECTID","label":"OBJECTID","isEditable":false,"tooltip":"","visible":false,"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"gridcode","label":"gridcode","isEditable":true,"tooltip":"","visible":true,"format":{"places":0,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Shape__Area","label":"Shape__Area","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"Shape__Length","label":"Shape__Length","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false}],"description":"Temperature and salinity conditions are suitable for year-round survival {gridcode} out of 10 years.","showAttachments":true,"mediaInfos":[]}},{"id":"AlosaSapidissima_MIROC_2003_2013_1117","layerType":"ArcGISFeatureLayer","url":"https://services7.arcgis.com/DlE4MSUhoXlyq64t/arcgis/rest/services/AlosaSapidissima_MIROC_2003_2013/FeatureServer/0","visibility":false,"opacity":1,"title":"Alosa sapidissima (MIROC3.2) 2003-2012","popupInfo":{"title":"Alosa sapidissima (MIROC3.2) 2003 to 2012","fieldInfos":[{"fieldName":"OBJECTID","label":"OBJECTID","isEditable":false,"tooltip":"","visible":false,"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"gridcode","label":"gridcode","isEditable":true,"tooltip":"","visible":true,"format":{"places":0,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Shape__Area","label":"Shape__Area","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"Shape__Length","label":"Shape__Length","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false}],"description":"Temperature and salinity conditions are suitable for year-round survival {gridcode} out of 10 years.","showAttachments":true,"mediaInfos":[]}},{"id":"AlosaSapidissima_ECHOG_2029_2039_5822","layerType":"ArcGISFeatureLayer","url":"https://services7.arcgis.com/DlE4MSUhoXlyq64t/arcgis/rest/services/AlosaSapidissima_ECHOG_2029_2039/FeatureServer/0","visibility":false,"opacity":1,"title":"Alosa sapidissima (ECHO-G) 2030-2039","popupInfo":{"title":"Alosa sapidissima (ECHO-G) 2030 to 2039","fieldInfos":[{"fieldName":"OBJECTID","label":"OBJECTID","isEditable":false,"tooltip":"","visible":false,"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"gridcode","label":"gridcode","isEditable":true,"tooltip":"","visible":true,"format":{"places":0,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Shape__Area","label":"Shape__Area","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"Shape__Length","label":"Shape__Length","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false}],"description":"Temperature and salinity conditions are suitable for year-round survival {gridcode} out of 10 years.","showAttachments":true,"mediaInfos":[]}},{"id":"AlosaSapidissima_ECHOG_2003_2013_2898","layerType":"ArcGISFeatureLayer","url":"https://services7.arcgis.com/DlE4MSUhoXlyq64t/arcgis/rest/services/AlosaSapidissima_ECHOG_2003_2013/FeatureServer/0","visibility":false,"opacity":1,"title":"Alosa sapidissima (ECHO-G) 2003-2012","popupInfo":{"title":"Alosa sapidissima (ECHO-G) 2003 to 2012","fieldInfos":[{"fieldName":"OBJECTID","label":"OBJECTID","isEditable":false,"tooltip":"","visible":false,"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"gridcode","label":"gridcode","isEditable":true,"tooltip":"","visible":true,"format":{"places":0,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Shape__Area","label":"Shape__Area","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"Shape__Length","label":"Shape__Length","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false}],"description":"Temperature and salinity conditions are suitable for year-round survival {gridcode} out of 10 years.","showAttachments":true,"mediaInfos":[]}},{"id":"AlosaSapidissima_CCCma_2029_2039_7685","layerType":"ArcGISFeatureLayer","url":"https://services7.arcgis.com/DlE4MSUhoXlyq64t/arcgis/rest/services/AlosaSapidissima_CCCma_2029_2039/FeatureServer/0","visibility":false,"opacity":1,"title":"Alosa sapidissima (CGCM3/T47) 2030-2039","popupInfo":{"title":"Alosa sapidissima (CGCMT47) 2030 to 2039","fieldInfos":[{"fieldName":"OBJECTID","label":"OBJECTID","isEditable":false,"tooltip":"","visible":false,"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"gridcode","label":"gridcode","isEditable":true,"tooltip":"","visible":true,"format":{"places":0,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Shape__Area","label":"Shape__Area","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"Shape__Length","label":"Shape__Length","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false}],"description":"Temperature and salinity conditions are suitable for year-round survival {gridcode} out of 10 years.","showAttachments":true,"mediaInfos":[]}},{"id":"AlosaSapidissima_CCCma_2003_2013_7341","layerType":"ArcGISFeatureLayer","url":"https://services7.arcgis.com/DlE4MSUhoXlyq64t/arcgis/rest/services/AlosaSapidissima_CCCma_2003_2013/FeatureServer/0","visibility":true,"opacity":1,"title":"Alosa sapidissima (CGCM3/T47) 2003-2012","popupInfo":{"title":"Alosa sapidissima (CGCM3/T47) 2003 to 2012","fieldInfos":[{"fieldName":"OBJECTID","label":"OBJECTID","isEditable":false,"tooltip":"","visible":false,"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"gridcode","label":"gridcode","isEditable":true,"tooltip":"","visible":true,"format":{"places":0,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Shape__Area","label":"Shape__Area","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false},{"fieldName":"Shape__Length","label":"Shape__Length","isEditable":false,"tooltip":"","visible":false,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":false}],"description":"Temperature and salinity conditions are suitable for year-round survival {gridcode} out of 10 years.","showAttachments":true,"mediaInfos":[]}},{"id":"AlosaSapidissima_Occurrences_8061","layerType":"ArcGISFeatureLayer","url":"https://services7.arcgis.com/DlE4MSUhoXlyq64t/arcgis/rest/services/AlosaSapidissima_Occurrences/FeatureServer/0","visibility":true,"opacity":1,"title":"Alosa sapidissima occurrences","popupInfo":{"title":"<i>Alosa sapidissima<\/i> occurrences","fieldInfos":[{"fieldName":"OBJECTID","label":"OBJECTID","isEditable":true,"tooltip":"","visible":false,"format":{"places":0,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"OBJECTID_1","label":"OBJECTID_1","isEditable":false,"tooltip":"","visible":false,"format":{"places":0,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"dB_Source","label":"dB_Source","isEditable":true,"tooltip":"","visible":true,"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"NEMESIS_Re","label":"NEMESIS_Re","isEditable":true,"tooltip":"","visible":true,"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"sci_name","label":"sci_name","isEditable":true,"tooltip":"","visible":true,"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Citation","label":"Citation","isEditable":true,"tooltip":"","visible":true,"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Year_","label":"Year_","isEditable":true,"tooltip":"","visible":true,"format":{"places":0,"digitSeparator":false},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Year_Accur","label":"Year_Accur","isEditable":true,"tooltip":"","visible":true,"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Locality","label":"Locality","isEditable":true,"tooltip":"","visible":true,"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"status","label":"status","isEditable":true,"tooltip":"","visible":true,"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Lat","label":"Lat","isEditable":true,"tooltip":"","visible":true,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Long_","label":"Long_","isEditable":true,"tooltip":"","visible":true,"format":{"places":2,"digitSeparator":true},"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Notes","label":"Notes","isEditable":true,"tooltip":"","visible":true,"stringFieldOption":"textbox","isEditableOnLayer":true},{"fieldName":"Prox_Rank","label":"Prox_Rank","isEditable":true,"visible":false,"format":{"places":2,"digitSeparator":true}},{"fieldName":"Dist_to_Ec","label":"Dist_to_Ec","isEditable":true,"visible":false,"format":{"places":2,"digitSeparator":true}},{"fieldName":"Prox_Dir","label":"Prox_Dir","isEditable":true,"visible":false,"stringFieldOption":"textbox"},{"fieldName":"ECOREGION","label":"ECOREGION","isEditable":true,"visible":false,"stringFieldOption":"textbox"},{"fieldName":"PROVINCE","label":"PROVINCE","isEditable":true,"visible":false,"stringFieldOption":"textbox"},{"fieldName":"REALM","label":"REALM","isEditable":true,"visible":false,"stringFieldOption":"textbox"},{"fieldName":"ALT_CODE","label":"ALT_CODE","isEditable":true,"visible":false,"format":{"places":2,"digitSeparator":true}},{"fieldName":"ECO_CODE_X","label":"ECO_CODE_X","isEditable":true,"visible":false,"format":{"places":2,"digitSeparator":true}},{"fieldName":"F21","label":"F21","isEditable":true,"visible":false,"stringFieldOption":"textbox"}],"description":"<div>Occurrence of {sci_name} reported in {Year_}.<\/div><div> <\/div><div><b>Data reference:<\/b> {Citation}.<\/div><div><b>Data source: <\/b>{dB_source}.<\/div>","showAttachments":true,"mediaInfos":[]}}],"baseMap":{"baseMapLayers":[{"id":"defaultBasemap_0","layerType":"ArcGISTiledMapServiceLayer","url":"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer","visibility":true,"opacity":1,"title":"World_Topo_Map"}],"title":"Topographic"},"spatialReference":{"wkid":102100,"latestWkid":3857},"authoringApp":"WebMapViewer","authoringAppVersion":"5.4","version":"2.11"}
	
	// Define function requirements and start function
	require([
		// ArcGIS
		"esri/WebMap",
		"esri/views/MapView",

		// Widgets
		"esri/widgets/BasemapGallery",
		"esri/widgets/Search",
		"esri/widgets/Legend",
		"esri/widgets/LayerList",
		"esri/widgets/Print",
		"esri/widgets/BasemapToggle",
		"esri/widgets/ScaleBar",

		// Calcite Maps
		"calcite-maps/calcitemaps-v0.5",
		// Calcite Maps ArcGIS Support
		"calcite-maps/calcitemaps-arcgis-support-v0.5",

		// Bootstrap
		"bootstrap/Collapse",
		"bootstrap/Dropdown",
		"bootstrap/Modal",

		"dojo/domReady!"
	], function(WebMap, MapView, Basemaps, Search, Legend, LayerList, Print, BasemapToggle, ScaleBar, CalciteMaps, CalciteMapArcGISSupport) {

		/******************************************************************
		*
		* Create the map, view and widgets
		* 
		******************************************************************/

		// Map
		var map = WebMap.fromJSON(webmapJSON);
      
		// View
		var mapView = new MapView({
			container: "mapViewDiv",
			map: map,
			center: [-155,64.5],
			zoom: 4,
			padding: {
				top: 50,
				bottom: 0
			},
			breakpoints: {
				xsmall: 768,
				small: 769,
				medium: 992,
				large: 1200
			},
			ui: {components: ["zoom", "compass", "attribution"]}
		});

      // Popup
      mapView.then(function(){
        CalciteMapArcGISSupport.setPopupPanelSync(mapView);
      });

      // Basemaps
      var basemaps = new Basemaps({
        container: "basemapGalleryDiv",
        view: mapView
      })

      // Search - add to navbar
      var searchWidget = new Search({
        container: "searchWidgetDiv",
        view: mapView
      });

      CalciteMapArcGISSupport.setSearchExpandEvents(searchWidget);
      
      // Legend
      var legendWidget = new Legend({
        container: "legendDiv",
        view: mapView
      });

      // LayerList
      var layerWidget = new LayerList({
        container: "layersDiv",
        view: mapView
      });

      // Print
      var printWidget = new Print({
        container: "printDiv",
        view: mapView,
        printServiceUrl: "https://utility.arcgisonline.com/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task"
      });

      // BasemapToggle
      var basemapToggle = new BasemapToggle({
        view: mapView,
        secondBasemap: "satellite"
      });
      mapView.ui.add(basemapToggle, "bottom-right");          
      
      // Scalebar
      var scaleBar = new ScaleBar({
        view: mapView
      });
      mapView.ui.add(scaleBar, "bottom-left");

    });
  </script>
</body>
</html>